name: GitHub Actions Demo
on:
  workflow_dispatch:
    inputs:
      CompressArtifacts:
        default: true
        description: Whether to compress or not the Artifact
        type: boolean  
      # Compresscommand:
      #   default:  tar -cvf my_file.tar my_file.txt 
      #   description: Command to compress th eartifact
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:
      - run: echo "testing build"
      
      - name: cdk install 
        run: npm install -g aws-cdk@2.x
      
      - name: working directory 
        run: pwd
      
      - name: zip file 
        run: cd .. ; tar -cvf sampleworkflow.tar sampleworkflow 
      
      - name: listing 
        run: ls -R
      
      - name: Create a file 
        run: echo "Sample to upload artifact" > my_file.txt
      
      # - name: Zipping file 
      #   run: tar -cvf my_file.tar my_file.txt  

      # - name: Compressing file 
      #   if: {{ inputs.CompressArtifacts == true }}
      #   runs-on: ubuntu-latest
      #   needs: build_test
      #   steps: 
      #     - name: DEMO
      #     - run: tar -cvf my_file.tar my_file.txt 

      - name: Compressing file 
        if: ${{ inputs.CompressArtifacts == true }}
        run: tar -cvf my_file.tar my_file.txt 
      
  # Compressfile:
  #   runs-on: ubuntu-latest
  #   steps:     
  #     - name: Run if Compress is True 
  #       if: {{inputs.CompressArtifacts == 'true'}} 
  #       run: tar -cvf my_file.tar my_file.txt
      
  #     # - name: Run if Compress != true 
  #     #   if: {{inputs.CompressArtifacts}} 
  #     #   run: tar -cvf my_file.tar my_file.txt
      
      - name: 'Upload Artifact'
        uses: actions/upload-artifact@v3
        with:
          name: my_file.tar
          path: ./
          retention-days: 5